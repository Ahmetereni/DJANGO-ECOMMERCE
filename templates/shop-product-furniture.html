{% extends 'base.html' %}

{% load static %}

{% block body %}

  <!-- Body -->
  <body>

    <div class="modal fade" id="reviewForm" data-bs-backdrop="static" tabindex="-1" aria-labelledby="reviewFormLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content p-4">
          <h5 class="modal-title mb-3" id="reviewFormLabel">Redüktörlü Mekanizma Nedir?</h5>
          <p>Güç gerektirmeden hareket ettirilir<br>5 kat daha uzun ömürlü</p>
          <p><strong>Redüktörlü Mekanizma Nedir?</strong> Redüktörlü mekanizma klasik ipli sisteme göre zincirli sistemdir ve dişli yardımı ile perdeyi hareket ettirir, bu da güç uygulanmasını gerektirmeden perdenin hareket ettirilmesini sağlamaktadır. Büyük ebatlı ölçülerde klasik ipli sistem ile birlikte perdeyi sadece açık ve kapalı konuma alabilirsiniz, aşağı yukarı hareket ettirmenize olanak vermeyecek şekilde perde ağırdır. 120 cm enine kadar ipli sistemde hareket ettirilebilmektedir fakat redüktörlü sistemde 120 cm olan perdeyi hareket ettirmek 5 kat daha rahattır, bu bilgiler ışığında hareket ederseniz sonuçlar sizi şaşırtmayacaktır.</p>
          <p><strong>Ne Zaman Kullanmalıyım?</strong> 120 cm üzeri en ölçülerinde ve 180 cm üzeri boy ölçülerinde muhakkak kullanmanızı önerdiğimiz sistem olmakla birlikte tüm ölçüler için kullanmanız tavsiye edilmektedir.</p>
          <div class="modal-footer flex-nowrap gap-3 border-0 px-4">
            <button type="reset" class="btn btn-secondary w-100 rounded-pill m-0" data-bs-dismiss="modal">Cancel</button>
          </div>
        </div>
      </div>
    </div>


    <!-- Shopping cart offcanvas (Empty state) -->
    <div class="offcanvas offcanvas-end pb-sm-2 px-sm-2" id="shoppingCart" tabindex="-1" aria-labelledby="shoppingCartLabel" style="width: 500px">
      <div class="offcanvas-header py-3 pt-lg-4">
        <h4 class="offcanvas-title" id="shoppingCartLabel">Shopping cart</h4>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body text-center">
        <svg class="d-block mx-auto mb-4" xmlns="http://www.w3.org/2000/svg" width="60" viewBox="0 0 29.5 30"><path class="text-body-tertiary" d="M17.8 4c.4 0 .8-.3.8-.8v-2c0-.4-.3-.8-.8-.8-.4 0-.8.3-.8.8v2c0 .4.3.8.8.8zm3.2.6c.4.2.8 0 1-.4l.4-.9c.2-.4 0-.8-.4-1s-.8 0-1 .4l-.4.9c-.2.4 0 .9.4 1zm-7.5-.4c.2.4.6.6 1 .4s.6-.6.4-1l-.4-.9c-.2-.4-.6-.6-1-.4s-.6.6-.4 1l.4.9z" fill="currentColor"/><path class="text-body-emphasis" d="M10.7 24.5c-1.5 0-2.8 1.2-2.8 2.8S9.2 30 10.7 30s2.8-1.2 2.8-2.8-1.2-2.7-2.8-2.7zm0 4c-.7 0-1.2-.6-1.2-1.2s.6-1.2 1.2-1.2 1.2.6 1.2 1.2-.5 1.2-1.2 1.2zm11.1-4c-1.5 0-2.8 1.2-2.8 2.8a2.73 2.73 0 0 0 2.8 2.8 2.73 2.73 0 0 0 2.8-2.8c0-1.6-1.3-2.8-2.8-2.8zm0 4c-.7 0-1.2-.6-1.2-1.2s.6-1.2 1.2-1.2 1.2.6 1.2 1.2-.6 1.2-1.2 1.2zM8.7 18h16c.3 0 .6-.2.7-.5l4-10c.2-.5-.2-1-.7-1H9.3c-.4 0-.8.3-.8.8s.4.7.8.7h18.3l-3.4 8.5H9.3L5.5 1C5.4.7 5.1.5 4.8.5h-4c-.5 0-.8.3-.8.7s.3.8.8.8h3.4l3.7 14.6a3.24 3.24 0 0 0-2.3 3.1C5.5 21.5 7 23 8.7 23h16c.4 0 .8-.3.8-.8s-.3-.8-.8-.8h-16a1.79 1.79 0 0 1-1.8-1.8c0-1 .9-1.6 1.8-1.6z" fill="currentColor"/></svg>
        <h6 class="mb-2">Your shopping cart is currently empty!</h6>
        <p class="fs-sm mb-4">Explore our wide range of products and add items to your cart to proceed with your purchase.</p>
        <a class="btn btn-dark rounded-pill" href="shop-catalog-furniture.html">Continue shopping</a>
      </div>
    </div>

    <!-- Page content -->
    <main class="content-wrapper">
      <div class="container">

        <!-- Breadcrumb -->
        <nav class="position-relative pt-3 mt-3 mt-md-4 mb-4" aria-label="breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="home-furniture.html">Ana Sayfa</a></li>
            <li class="breadcrumb-item"><a href="shop-catalog-furniture.html">Mağaza</a></li>
            <li class="breadcrumb-item active" aria-current="page">Ürün Sayfası</li>
          </ol>
        </nav>


        <!-- Product gallery and details -->
        <section class="row pb-4 pb-md-5 mb-2 mb-md-0 mb-xl-3">

          <!-- Gallery -->
          <div class="col-md-7 col-xl-8 pb-4 pb-md-0 mb-2 mb-sm-3 mb-md-0">
            <div class="row row-cols-2 g-3 g-sm-4 g-md-3 g-lg-4">
              <div class="col">
                <a class="hover-effect-scale hover-effect-opacity position-relative d-flex rounded-4 overflow-hidden" href="{{product.task_media.url}}" data-glightbox data-gallery="product-gallery">
                  <i class="ci-zoom-in hover-effect-target fs-3 text-white position-absolute top-50 start-50 translate-middle opacity-0 z-2"></i>
                  <div class="ratio ratio-1x1 hover-effect-target">
                    <img src="{{product.task_media.url}}" alt="Image">
                  </div>
                </a>
              </div>
              <div class="col">
                <a class="hover-effect-scale hover-effect-opacity position-relative d-flex rounded-4 overflow-hidden" href="{{product.task_background_media.url}}" data-glightbox data-gallery="product-gallery">
                  <span class="hover-effect-target position-absolute top-0 start-0 w-100 h-100 bg-black bg-opacity-25 opacity-0 z-1"></span>
                  <i class="ci-zoom-in hover-effect-target fs-3 text-white position-absolute top-50 start-50 translate-middle opacity-0 z-2"></i>
                  <div class="ratio ratio-1x1 hover-effect-target">
                    <img src="{{product.task_background_media.url}}" alt="Image">
                  </div>
                </a>
              </div>
              <div class="col-12">
                <div class="collapse d-md-block" id="morePictures">
                  <div class="row row-cols-2 g-3 g-sm-4 g-md-3 g-lg-4 pb-3 pb-sm-4 pb-md-0">
                    <div class="col">
                      <a class="hover-effect-scale hover-effect-opacity position-relative d-flex rounded-4 overflow-hidden" href="{{product.task_media_3.url}}" data-glightbox data-gallery="product-gallery">
                        <span class="hover-effect-target position-absolute top-0 start-0 w-100 h-100 bg-black bg-opacity-25 opacity-0 z-1"></span>
                        <i class="ci-zoom-in hover-effect-target fs-3 text-white position-absolute top-50 start-50 translate-middle opacity-0 z-2"></i>
                        <div class="ratio ratio-1x1 hover-effect-target">
                          <img src="{{product.task_media_3.url}}" alt="Image">
                        </div>
                      </a>
                    </div>
                    <div class="col">
                      <a class="hover-effect-scale hover-effect-opacity position-relative d-flex rounded-4 overflow-hidden" href="{{product.task_media_4.url}}" data-glightbox data-gallery="product-gallery">
                        <span class="hover-effect-target position-absolute top-0 start-0 w-100 h-100 bg-black bg-opacity-25 opacity-0 z-1"></span>
                        <i class="ci-zoom-in hover-effect-target fs-3 text-white position-absolute top-50 start-50 translate-middle opacity-0 z-2"></i>
                        <div class="ratio ratio-1x1 hover-effect-target">
                          <img src="{{product.task_media_4.url}}" alt="Image">
                        </div>
                      </a>
                    </div>
                  </div>
                </div>
                <button type="button" class="btn btn-lg btn-outline-secondary w-100 collapsed d-md-none" data-bs-toggle="collapse" data-bs-target="#morePictures" data-label-collapsed="Daha fazla resim göster" data-label-expanded="Daha az resim göster" aria-expanded="false" aria-controls="morePictures" aria-label="Show / hide pictures">
                  <i class="collapse-toggle-icon ci-chevron-down fs-lg ms-2 me-n2"></i>
                </button>
              </div>
            </div>
          </div>

            <!-- Product details and options -->
          <div class="col-md-5 col-xl-4">
              <div class="d-none d-md-block" style="margin-top: -90px"></div>
              <div class="sticky-md-top ps-md-2 ps-xl-4">
                <div class="d-none d-md-block" style="padding-top: 90px"></div>
                <div class="fs-xs text-body-secondary mb-3">V00273124</div>
                <h1 class="fs-xl fw-medium">{{ product.product_name }}</h1>
                <div class="h4 fw-bold mb-4">₺{{ product.product_price }}/{{ product.product_price_type }} <del class="fs-sm fw-normal text-body-tertiary" id="calculated_price">₺416.00</del></div>
                <ul class="list-unstyled fs-sm text-body-emphasis mb-4">
                  <li>
                    <span class="me-1">💳 4 Taksit Fırsatı <br>
                    <span class="me-1"><span class="fw-semibold">₺89.00</span> tutarında 4 faizsiz ödeme ile satın alın (Ödeme yönteminize göre düzenlenebilir)
                    <a class="d-inline-block" href="#!" aria-label="Afterpay">
                      <svg xmlns="http://www.w3.org/2000/svg" width="80" viewBox="0 0 360 129.6"><path d="M297.4 127.4H62.7C28 127.4 0 99.4 0 64.8h0C0 30.2 28 2.1 62.7 2.1h234.7c34.6 0 62.6 28 62.6 62.6h0c0 34.7-28 62.7-62.6 62.7z" fill="#b2fce4"/><path d="M306.8 49.8l-7.9-4.5-8-4.6c-5.3-3-11.9.8-11.9 6.9v1c0 .6.3 1.1.8 1.4l3.7 2.1c1 .6 2.3-.2 2.3-1.3v-2.4c0-1.2 1.3-2 2.3-1.4l7.3 4.2 7.3 4.2c1.1.6 1.1 2.1 0 2.7l-7.3 4.2-7.3 4.2c-1 .6-2.3-.2-2.3-1.4v-1.2c0-6.1-6.6-9.9-11.9-6.9l-8 4.6-7.9 4.5c-5.3 3-5.3 10.7 0 13.8l7.9 4.5 8 4.6c5.3 3 11.9-.8 11.9-6.9v-1c0-.6-.3-1.1-.8-1.4l-3.7-2.1c-1-.6-2.3.2-2.3 1.3v2.4c0 1.2-1.3 2-2.3 1.4l-7.3-4.2-7.3-4.2c-1.1-.6-1.1-2.1 0-2.7l7.3-4.2 7.3-4.2c1-.6 2.3.2 2.3 1.4v1.2c0 6.1 6.6 9.9 11.9 6.9l8-4.6 7.9-4.5c5.4-3.1 5.4-10.7 0-13.8zm-51.6 1.5l-18.5 38.1H229l6.9-14.2-10.8-23.9h7.9l7 16 7.6-16h7.6zM70.8 64.9c0-4.5-3.3-7.7-7.4-7.7S56 60.4 56 64.9c0 4.4 3.3 7.7 7.4 7.7s7.4-3.2 7.4-7.7m.1 13.5v-3.5c-2 2.4-5 3.9-8.5 3.9-7.4 0-13-5.9-13-14 0-8 5.8-14 13.2-14 3.5 0 6.4 1.5 8.4 3.9v-3.4h6.7v27h-6.8zm38.9-6c-2.3 0-3-.9-3-3.1v-12h4.3v-5.9h-4.3v-6.6H100v6.6h-8.8v-2.7c0-2.3.9-3.1 3.2-3.1H96v-5.2h-3.3c-5.6 0-8.3 1.8-8.3 7.5v3.6h-3.8v5.9h3.8v21.1h6.8V57.2h8.8v13.3c0 5.5 2.1 7.9 7.6 7.9h3.5v-6h-1.3zm24.5-10c-.5-3.5-3.4-5.6-6.7-5.6-3.4 0-6.1 2.1-6.8 5.6h13.5zm-13.6 4.2c.5 4 3.4 6.3 7 6.3 2.9 0 5.1-1.4 6.4-3.5h7c-1.6 5.7-6.8 9.4-13.5 9.4-8.2 0-13.9-5.7-13.9-13.9s6.1-14.1 14.1-14.1c8.1 0 13.9 5.9 13.9 14.1 0 .6-.1 1.2-.2 1.7h-20.8zm64.2-1.7c0-4.4-3.3-7.7-7.4-7.7s-7.4 3.2-7.4 7.7c0 4.4 3.3 7.7 7.4 7.7s7.4-3.4 7.4-7.7m-21.4 24.5V51.3h6.7v3.5c2-2.5 5-4 8.5-4 7.3 0 13 6 13 14s-5.8 14-13.2 14c-3.4 0-6.2-1.4-8.2-3.6v14.2h-6.8zm52.2-24.5c0-4.5-3.3-7.7-7.4-7.7s-7.4 3.2-7.4 7.7c0 4.4 3.3 7.7 7.4 7.7s7.4-3.2 7.4-7.7m.1 13.5v-3.5c-2 2.4-5 3.9-8.5 3.9-7.4 0-13-5.9-13-14 0-8 5.8-14 13.2-14 3.5 0 6.4 1.5 8.4 3.9v-3.4h6.7v27h-6.8zM151.5 54s1.7-3.1 5.8-3.1c1.8 0 2.9.6 2.9.6v6.9s-2.5-1.5-4.8-1.2-3.8 2.4-3.7 5.2v16h-6.9v-27h6.7V54z"/></svg>
                    </a>
                  </li>
                  <li>
                    <span class="me-1">Tüm ürünlerimiz <span class="fw-semibold">✅ 3 yıl garantilidir.</span></span>
                    <svg class="text-body-emphasis" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"><path fill-rule="evenodd" d="M22.287 10.967l-1.7-2c-.215-.254-.346-.568-.373-.9L20 5.46c-.029-.379-.193-.734-.462-1.002s-.625-.43-1.004-.458l-2.607-.213c-.332-.027-.646-.158-.9-.373l-2-1.7c-.288-.247-.654-.383-1.033-.383s-.746.136-1.033.383l-2 1.7c-.254.215-.568.346-.9.373L5.467 4c-.38.028-.737.191-1.006.461s-.433.626-.46 1.006l-.213 2.607c-.027.332-.158.646-.373.9l-1.7 2c-.247.288-.383.654-.383 1.033s.136.746.383 1.033l1.7 2c.215.254.346.568.373.9L4 18.547c.031.377.196.731.465.998s.624.428 1.002.456l2.607.213c.332.027.646.158.9.373l2 1.7c.288.247.654.383 1.033.383s.746-.136 1.033-.383l2-1.7c.254-.215.568-.346.9-.373L18.534 20c.38-.028.737-.191 1.006-.46s.433-.626.46-1.006l.213-2.607c.027-.332.158-.646.373-.9l1.7-2c.245-.287.38-.652.38-1.03s-.135-.743-.38-1.03zm-11.08 4.153l-2.96-2.96 1.127-1.127 1.833 1.827 3.42-3.42 1.127 1.127-4.547 4.553z"/></svg>
                  </li>
                </ul>

                <!-- Color options -->
                <div class="mb-4">
                  <label class="form-label fw-semibold pb-1 mb-2">Renk Seçiniz</label>
                  <div class="d-flex flex-wrap gap-2" data-binded-label="#colorOption">

                    {% for clr in color %}
                    <input type="radio" class="btn-check" name="colors" id="{{clr.product_color_name}}">
                    <label for="{{clr.product_color_name}}" class="btn btn-image p-0" data-label="{{clr.product_color_name}}">
                      <img src="{{clr.product_color_media.url}}" width="56" alt="Viridian color">
                      <span>{{clr.product_color_name}}</span>
                    </label>
                    {% endfor %}
                  </div>
                </div>

                <!-- Material select -->
                <div class="mb-4">
                  <label class="form-label fw-semibold pb-1 mb-2">🧵 Ürün Özellikleri:</label>
                  <select class="form-select form-select-lg rounded-pill" data-select='{
                    "classNames": {
                      "containerInner": ["form-select", "form-select-lg", "rounded-pill"]
                    }
                  }' aria-label="Material select">
                    <option value="">Özellik seçin</option>
                    <option value="ipli-jaluzi">İpli Jaluzi</option>
                    <option value="kurdaleli-jaluzi">Kurdaleli Jaluzi</option>
                  </select>
                </div>


                <!-- Mounting Type Select -->
                <div class="mb-4">
                  <label class="form-label fw-semibold pb-1 mb-2">📍 Perdenizi nereye takacaksınız?</label>
                  <select class="form-select form-select-lg rounded-pill" data-select='{
                    "classNames": {
                      "containerInner": ["form-select", "form-select-lg", "rounded-pill"]
                    }
                  }' aria-label="Mounting Type Select">
                    <option value="">Seçenek seçin</option>
                    <option value="cornice">Korniş</option>
                    <option value="rustic_pipe">Rustik Borusuna (Halkalı)</option>
                  </select>
                </div>


                <!-- Tieback Selection -->
                <div class="mb-4">
                  <label class="form-label fw-semibold pb-1 mb-2">🎀 Kendi kumaşından fon bağı ister misiniz?</label>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="tiebackCheckbox">
                    <label class="form-check-label" for="tiebackCheckbox">
                      Kendi Kumaşından Fon Bağı İstiyorum
                    </label>
                  </div>
                  <p class="text-muted mt-1">Birim Fiyat: <span class="text-warning fw-semibold">₺35,20</span> (+KDV)</p>
                </div>


                <div class="mb-4">
                  <label class="form-label fw-semibold pb-1 mb-2">⚙️ Redüktörlü Mekanizma İster Misiniz?</label><br>
                  <a class="text-muted" style="text-decoration: none; font-size: 14px;"
                     data-bs-toggle="modal" data-bs-target="#reviewForm">
                    &#9432; Bilgi için tıklayınız
                  </a>
                  <div class="form-check mt-2">
                    <input class="form-check-input" type="checkbox" id="reductorCheckbox">
                    <label class="form-check-label" for="reductorCheckbox">
                      <strong>Redüktörlü Mekanizma İstiyorum</strong>
                    </label>
                  </div>
                  <p class="text-muted mt-1">Birim Fiyat: <span class="text-warning fw-semibold">₺450,00</span> (+KDV)</p>
                </div>


                <!-- Perde Ölçüleri Seçimi -->
                <div class="mb-4">
                  <label class="form-label fw-semibold pb-1 mb-2">📏 Perde Ölçüleri:</label>
                  <div class="row g-3">
                    <div class="col-md-6">
                      <label for="input-width" class="form-label fs-base">📐 En (cm)</label>
                      <input type="number" id='product_width' class="form-control form-control-md" placeholder="Minimum: {{ product.product_min_en }} cm">
                    </div>
                    <div class="col-md-6">
                      <label for="input-height" class="form-label fs-base">📐 Boy (cm)</label>
                      <input type="number" id='product_length' class="form-control form-control-md" placeholder="Minimum: {{ product.product_min_boy }} cm  ">
                    </div>
                  </div>
                </div>

                <!-- Quantity select -->
                <div class="mb-4">
                    <label class="form-label fw-semibold pb-1 mb-2">🔢 Ürün Adedi:</label>
                    <select id='select' class="form-select form-select-lg rounded-pill" aria-label="Quantity select">
                        <option value="">Adet seçin</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                    </select>
                </div>

                <!-- Add to cart + Wishlist buttons -->
                <div class="d-flex gap-3 pb-4 mb-2 mb-lg-3">
                  <button type="button" id="add-button" data-id="{{ product.id }}" class="btn btn-lg btn-dark w-100 rounded-pill" >🛒 Sepete ekle</button>
                  <button type="button" class="btn btn-icon btn-lg btn-secondary rounded-circle animate-pulse" aria-label="Add to Wishlist">
                    <i class="ci-heart fs-lg animate-target"></i>
                  </button>
                </div>

                <!-- Shipping info -->
                <div class="mb-4">
                  <h6 class="d-flex align-items-center fs-sm mb-2">
                    <i class="ci-delivery fs-lg me-2"></i>
                    🚚 Ücretsiz Kargo
                  </h6>
                  <div class="fs-sm">
                    <span class="me-1">{{ minimum_delivery }}-{{ maximum_delivery }} tarihleri arasında teslimat</span>
                    <div class="dropdown d-inline-block">
                      <a class="dropdown-toggle animate-underline fs-sm fw-semibold text-body-emphasis text-decoration-none" href="#!" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <span class="animate-target">İzmit - 41050</span>
                      </a>
                      <div class="dropdown-menu dropdown-menu-end text-body p-3">
                        Cumhuriyet Caddesi, No: 25<br>41050, İzmit, Kocaeli, Türkiye
                        <div class="h6 fs-sm pt-1 mb-0">Ahmet Yılmaz</div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Contact -->
                <div class="d-flex align-items-center justify-content-between bg-body-tertiary rounded p-3">
                  <div class="me-3">
                    <h6 class="fs-sm mb-1">❓ Sorularınız mı var?</h6>
                    <p class="fs-sm mb-0">Bizimle iletişime geçin, size yardımcı olalım</p>
                  </div>
                  <a class="btn btn-sm btn-outline-dark rounded-pill" href="contact-v2.html">Bize Ulaşın</a>
                </div>
              </div>
          </div>
        </section>


        <!-- Sticky product preview + Add to cart CTA -->
        <section class="sticky-product-banner sticky-top" data-sticky-element>
          <div class="sticky-product-banner-inner pt-5">
            <div class="navbar flex-nowrap align-items-center bg-body pt-4 pb-2">
              <div class="d-flex align-items-center min-w-0 ms-lg-2 me-3">
                <div class="ratio ratio-1x1 flex-shrink-0" style="width: 50px">
                  <img src="{{product.task_media.url}}" alt="Image">
                </div>
                <h4 class="h6 fw-medium d-none d-lg-block ps-3 mb-0">{{ product.product_name }}</h4>
                <div class="w-100 min-w-0 d-lg-none ps-2">
                  <h4 class="fs-sm fw-medium text-truncate mb-1">{{ product.product_name }}</h4>
                  <div class="h6 mb-0">₺{{ product.product_price }} <del class="fs-xs fw-normal text-body-tertiary">₺{{ product.product_price }}</del></div>
                </div>
              </div>
              <div class="h4 d-none d-lg-block mb-0 ms-auto me-4">₺{{ product.product_price }} <del class="fs-sm fw-normal text-body-tertiary">₺{{ product.product_price }}</del></div>
              <div class="d-flex gap-2">
                <button type="button" class="btn btn-icon btn-secondary rounded-circle animate-pulse" aria-label="Add to Wishlist">
                  <i class="ci-heart fs-base animate-target"></i>
                </button>
                <button type="button" class="btn btn-dark rounded-pill ms-auto d-none d-md-inline-flex px-4">Sepete ekle</button>
                <button type="button" class="btn btn-icon btn-dark rounded-circle animate-slide-end ms-auto d-md-none" aria-label="Add to Cart">
                  <i class="ci-shopping-cart fs-base animate-target"></i>
                </button>
              </div>
            </div>
          </div>
        </section>


        <!-- Ürün Açıklaması -->
        <section class="row pb-5 mb-2 mb-sm-3 mb-lg-4 mb-xl-5">
          <div class="col-md-7 col-xl-8 mb-xxl-3">
            <p>{{ product.product_aciklama }}</p>
            <ul class="list-unstyled pb-md-2 pb-lg-3">
              <li class="mt-1"><span class="h6 mb-0">Genişlik:</span> Özel ölçü seçenekleri</li>
              <li class="mt-1"><span class="h6 mb-0">Uzunluk:</span> Özel ölçü seçenekleri</li>
              <li class="mt-1"><span class="h6 mb-0">Malzeme Türü:</span> {{ product.product_material }}</li>
              <li class="mt-1"><span class="h6 mb-0">Işık Geçirgenliği:</span> Orta - Düşük Seviye</li>
              <li class="mt-1"><span class="h6 mb-0">Temizleme:</span> {{ product.product_temizlemeyontemi }}</li>
            </ul>

            <div class="accordion accordion-alt-icon" id="productAccordion">
              <div class="accordion-item">
                <h3 class="accordion-header" id="headingProductInfo">
                  <button type="button" class="accordion-button animate-underline fs-xl collapsed" data-bs-toggle="collapse" data-bs-target="#productInfo" aria-expanded="false" aria-controls="productInfo">
                    <span class="animate-target me-2">Ürün Bilgileri</span>
                  </button>
                </h3>
                <div class="accordion-collapse collapse" id="productInfo" aria-labelledby="headingProductInfo" data-bs-parent="#productAccordion">
                  <div class="accordion-body fs-base">{{ product.product_urunbilgileri|linebreaks }}</div>
                </div>
              </div>
              <div class="accordion-item">
                <h3 class="accordion-header" id="headingProductFeatures">
                  <button type="button" class="accordion-button animate-underline fs-xl collapsed" data-bs-toggle="collapse" data-bs-target="#productFeatures" aria-expanded="false" aria-controls="productFeatures">
                    <span class="animate-target me-2">Özellikler</span>
                  </button>
                </h3>
                <div class="accordion-collapse collapse" id="productFeatures" aria-labelledby="headingProductFeatures" data-bs-parent="#productAccordion">
                  <div class="accordion-body fs-base">
                    <ul class="m-0">
                      {{ product.product_ozellikler|linebreaks }}
                    </ul>
                  </div>
                </div>
              </div>
              <div class="accordion-item">
                <h3 class="accordion-header" id="headingProductWarranty">
                  <button type="button" class="accordion-button animate-underline fs-xl collapsed" data-bs-toggle="collapse" data-bs-target="#productWarranty" aria-expanded="false" aria-controls="productWarranty">
                    <span class="animate-target me-2">Garanti Bilgileri</span>
                  </button>
                </h3>
                <div class="accordion-collapse collapse" id="productWarranty" aria-labelledby="headingProductWarranty" data-bs-parent="#productAccordion">
                  <div class="accordion-body fs-base">{{ product.product_garantibilgileri|linebreaks }}</div>
                </div>
              </div>
              <div class="accordion-item">
                <h3 class="accordion-header" id="headingProductDelivery">
                  <button type="button" class="accordion-button animate-underline fs-xl collapsed" data-bs-toggle="collapse" data-bs-target="#productDelivery" aria-expanded="false" aria-controls="productDelivery">
                    <span class="animate-target me-2">Teslimat ve Kargo</span>
                  </button>
                </h3>
                <div class="accordion-collapse collapse" id="productDelivery" aria-labelledby="headingProductDelivery" data-bs-parent="#productAccordion">
                  <div class="accordion-body fs-base">{{ product.product_teslimatvekargo|linebreaks }}</div>
                </div>
              </div>
            </div>
          </div>
        </section>



        <!-- Popular products carousel -->
        <section class="pb-5 mb-1 mb-sm-3 mb-lg-4 mb-xl-5">
          <h2 class="h3 pb-2 pb-sm-3">Popular products</h2>
          <div class="position-relative pb-xxl-3">

            <!-- External slider prev/next buttons visible on screens > 500px wide (sm breakpoint) -->
            <button type="button" class="popular-prev btn btn-icon btn-outline-secondary bg-body rounded-circle animate-slide-start position-absolute top-50 start-0 z-2 translate-middle mt-n5 d-none d-sm-inline-flex" aria-label="Prev">
              <i class="ci-chevron-left fs-lg animate-target"></i>
            </button>
            <button type="button" class="popular-next btn btn-icon btn-outline-secondary bg-body rounded-circle animate-slide-end position-absolute top-50 start-100 z-2 translate-middle mt-n5 d-none d-sm-inline-flex" aria-label="Next">
              <i class="ci-chevron-right fs-lg animate-target"></i>
            </button>

            <!-- Slider -->
            <div class="swiper" data-swiper='{
              "slidesPerView": 2,
              "spaceBetween": 24,
              "loop": true,
              "navigation": {
                "prevEl": ".popular-prev",
                "nextEl": ".popular-next"
              },
              "breakpoints": {
                "768": {
                  "slidesPerView": 3
                },
                "992": {
                  "slidesPerView": 4
                }
              }
            }'>
              <div class="swiper-wrapper">

                <!-- Item -->
                <div class="swiper-slide">
                  <div class="animate-underline">
                    <a class="hover-effect-opacity ratio ratio-1x1 d-block mb-3" href="shop-product-furniture.html">
                      <img src="{% static "assets/img/shop/furniture/04.png" class="hover-effect-target opacity-100" %}" alt="Product">
                      <img src="{% static "assets/img/shop/furniture/04-hover.jpg" class="position-absolute top-0 start-0 hover-effect-target opacity-0 rounded-4" %}" alt="Room">
                    </a>
                    <div class="d-flex gap-2 mb-3">
                      <input type="radio" class="btn-check" name="colors-4" id="color-4-1" checked>
                      <label for="color-4-1" class="btn btn-color fs-base" style="color: #384043">
                        <span class="visually-hidden">Dark gray</span>
                      </label>
                      <input type="radio" class="btn-check" name="colors-4" id="color-4-2">
                      <label for="color-4-2" class="btn btn-color fs-base" style="color: #bdc5da">
                        <span class="visually-hidden">Light gray</span>
                      </label>
                      <input type="radio" class="btn-check" name="colors-4" id="color-4-3">
                      <label for="color-4-3" class="btn btn-color fs-base" style="color: #526f99">
                        <span class="visually-hidden">Bluish gray</span>
                      </label>
                    </div>
                    <h3 class="mb-2">
                      <a class="d-block fs-sm fw-medium text-truncate" href="shop-product-furniture.html">
                        <span class="animate-target">Bed frame light gray 140x200 cm</span>
                      </a>
                    </h3>
                    <div class="h6">₺760.00</div>
                    <div class="d-flex gap-2">
                      <button type="button" class="btn btn-dark w-100 rounded-pill px-3">🛒 Sepete ekle</button>
                      <button type="button" class="btn btn-icon btn-secondary rounded-circle animate-pulse" aria-label="Add to wishlist">
                        <i class="ci-heart fs-base animate-target"></i>
                      </button>
                    </div>
                  </div>
                </div>
                <!-- Item -->
                <div class="swiper-slide">
                  <div class="animate-underline">
                    <a class="hover-effect-opacity ratio ratio-1x1 d-block mb-3" href="shop-product-furniture.html">
                      <div class="position-absolute top-0 start-0 z-2 mt-2 mt-sm-3 ms-2 ms-sm-3">
                        <span class="badge text-bg-danger">-13%</span>
                      </div>
                      <img src="{% static "assets/img/shop/furniture/06.png" %}" class="hover-effect-target opacity-100" alt="Product">
                      <img src="{% static "assets/img/shop/furniture/06-hover.jpg" %}" class="position-absolute top-0 start-0 hover-effect-target opacity-0 rounded-4" alt="Room">
                    </a>
                    <div class="d-flex gap-2 mb-3">
                      <input type="radio" class="btn-check" name="colors-6" id="color-6-1" checked>
                      <label for="color-6-1" class="btn btn-color fs-base" style="color: #bdaB9e">
                        <span class="visually-hidden">Beige</span>
                      </label>
                      <input type="radio" class="btn-check" name="colors-6" id="color-6-2">
                      <label for="color-6-2" class="btn btn-color fs-base" style="color: #d65c46">
                        <span class="visually-hidden">Terracotta</span>
                      </label>
                      <input type="radio" class="btn-check" name="colors-6" id="color-6-3">
                      <label for="color-6-3" class="btn btn-color fs-base" style="color: #e0e5eb">
                        <span class="visually-hidden">White</span>
                      </label>
                    </div>
                    <h3 class="mb-2">
                      <a class="d-block fs-sm fw-medium text-truncate" href="shop-product-furniture.html">
                        <span class="animate-target">Loft-style lamp 120x80 cm</span>
                      </a>
                    </h3>
                    <div class="h6">₺140.00 <del class="fs-sm fw-normal text-body-tertiary">₺160.00</del></div>
                    <div class="d-flex gap-2">
                      <button type="button" class="btn btn-dark w-100 rounded-pill px-3">🛒 Sepete ekle</button>
                      <button type="button" class="btn btn-icon btn-secondary rounded-circle animate-pulse" aria-label="Add to wishlist">
                        <i class="ci-heart fs-base animate-target"></i>
                      </button>
                    </div>
                  </div>
                </div>
                <!-- Item -->
                <div class="swiper-slide">
                  <div class="animate-underline">
                    <a class="hover-effect-opacity ratio ratio-1x1 d-block mb-3" href="shop-product-furniture.html">
                      <img src="{% static "assets/img/shop/furniture/02.png" %}" class="hover-effect-target opacity-100" alt="Product">
                      <img src="{% static "assets/img/shop/furniture/02-hover.jpg" %}" class="position-absolute top-0 start-0 hover-effect-target opacity-0 rounded-4" alt="Room">
                    </a>
                    <div class="d-flex gap-2 mb-3">
                      <input type="radio" class="btn-check" name="colors-2" id="color-2-1" checked>
                      <label for="color-2-1" class="btn btn-color fs-base" style="color: #6a6f7b">
                        <span class="visually-hidden">Gray</span>
                      </label>
                      <input type="radio" class="btn-check" name="colors-2" id="color-2-2">
                      <label for="color-2-2" class="btn btn-color fs-base" style="color: #373b42">
                        <span class="visually-hidden">Dark gray</span>
                      </label>
                      <input type="radio" class="btn-check" name="colors-2" id="color-2-3">
                      <label for="color-2-3" class="btn btn-color fs-base" style="color: #216aae">
                        <span class="visually-hidden">Blue</span>
                      </label>
                      <input type="radio" class="btn-check" name="colors-2" id="color-2-4">
                      <label for="color-2-4" class="btn btn-color fs-base" style="color: #187c1c">
                        <span class="visually-hidden">Green</span>
                      </label>
                    </div>
                    <h3 class="mb-2">
                      <a class="d-block fs-sm fw-medium text-truncate" href="shop-product-furniture.html">
                        <span class="animate-target">Decorative flowerpot with a plant</span>
                      </a>
                    </h3>
                    <div class="h6">₺107.50</div>
                    <div class="d-flex gap-2">
                      <button type="button" class="btn btn-dark w-100 rounded-pill px-3">🛒 Sepete ekle</button>
                      <button type="button" class="btn btn-icon btn-secondary rounded-circle animate-pulse" aria-label="Add to wishlist">
                        <i class="ci-heart fs-base animate-target"></i>
                      </button>
                    </div>
                  </div>
                </div>
                <!-- Item -->
                <div class="swiper-slide">
                  <div class="animate-underline">
                    <a class="hover-effect-opacity ratio ratio-1x1 d-block mb-3" href="shop-product-furniture.html">
                      <img src="{% static "assets/img/shop/furniture/02.png" %}" class="hover-effect-target opacity-100" alt="Product">
                      <img src="{% static "assets/img/shop/furniture/02-hover.jpg" %}" class="position-absolute top-0 start-0 hover-effect-target opacity-0 rounded-4" alt="Room">
                    </a>
                    <div class="d-flex gap-2 mb-3">
                      <input type="radio" class="btn-check" name="colors-2" id="color-2-1" checked>
                      <label for="color-2-1" class="btn btn-color fs-base" style="color: #6a6f7b">
                        <span class="visually-hidden">Gray</span>
                      </label>
                      <input type="radio" class="btn-check" name="colors-2" id="color-2-2">
                      <label for="color-2-2" class="btn btn-color fs-base" style="color: #373b42">
                        <span class="visually-hidden">Dark gray</span>
                      </label>
                      <input type="radio" class="btn-check" name="colors-2" id="color-2-3">
                      <label for="color-2-3" class="btn btn-color fs-base" style="color: #216aae">
                        <span class="visually-hidden">Blue</span>
                      </label>
                      <input type="radio" class="btn-check" name="colors-2" id="color-2-4">
                      <label for="color-2-4" class="btn btn-color fs-base" style="color: #187c1c">
                        <span class="visually-hidden">Green</span>
                      </label>
                    </div>
                    <h3 class="mb-2">
                      <a class="d-block fs-sm fw-medium text-truncate" href="shop-product-furniture.html">
                        <span class="animate-target">Decorative flowerpot with a plant</span>
                      </a>
                    </h3>
                    <div class="h6">₺107.50</div>
                    <div class="d-flex gap-2">
                      <button type="button" class="btn btn-dark w-100 rounded-pill px-3">🛒 Sepete ekle</button>
                      <button type="button" class="btn btn-icon btn-secondary rounded-circle animate-pulse" aria-label="Add to wishlist">
                        <i class="ci-heart fs-base animate-target"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- External slider prev/next buttons visible on screens < 500px wide (sm breakpoint) -->
          <div class="d-flex justify-content-center gap-2 mt-1 pt-4 d-sm-none">
            <button type="button" class="popular-prev btn btn-icon btn-outline-secondary bg-body rounded-circle animate-slide-start me-1" aria-label="Prev">
              <i class="ci-chevron-left fs-lg animate-target"></i>
            </button>
            <button type="button" class="popular-next btn btn-icon btn-outline-secondary bg-body rounded-circle animate-slide-end" aria-label="Next">
              <i class="ci-chevron-right fs-lg animate-target"></i>
            </button>
          </div>
        </section>

        <!-- Blog Yazıları -->
        <section class="pb-5 mb-2 mb-sm-3 mb-lg-4 mb-xl-5">
          <h2 class="h3 pb-2 pb-sm-3">Blogdan Öne Çıkanlar</h2>
          <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4 mb-xxl-3">

            <!-- Makale -->
            <article class="col">
              <a class="ratio d-flex hover-effect-scale rounded-4 overflow-hidden" href="#!" style="--cz-aspect-ratio: calc(260 / 306 * 100%)">
                <img src="{% static "assets/img/blog/grid/v2/10.jpg" %}" class="hover-effect-target" alt="Image">
              </a>
              <div class="pt-4">
                <div class="nav pb-2 mb-1">
                  <a class="nav-link text-body fs-xs text-uppercase p-0" href="#!">Perde Seçimi</a>
                </div>
                <h3 class="h6 mb-3">
                  <a class="hover-effect-underline" href="#!">Evinize En Uygun Perdeyi Seçmenin Püf Noktaları</a>
                </h3>
                <div class="nav align-items-center gap-2 fs-xs">
                  <a class="nav-link text-body-secondary fs-xs fw-normal p-0" href="#!">Ahmet Yıldız</a>
                  <hr class="vr my-1 mx-1">
                  <span class="text-body-secondary">5 Eylül 2024</span>
                </div>
              </div>
            </article>

            <!-- Makale -->
            <article class="col">
              <a class="ratio d-flex hover-effect-scale rounded-4 overflow-hidden" href="#!" style="--cz-aspect-ratio: calc(260 / 306 * 100%)">
                <img src="{% static "assets/img/blog/grid/v2/11.jpg" %}" class="hover-effect-target" alt="Image">
              </a>
              <div class="pt-4">
                <div class="nav pb-2 mb-1">
                  <a class="nav-link text-body fs-xs text-uppercase p-0" href="#!">Ev Dekorasyonu</a>
                </div>
                <h3 class="h6 mb-3">
                  <a class="hover-effect-underline" href="#!">Perdelerle Dekorasyon: Evinize Şıklık Katmanın Yolları</a>
                </h3>
                <div class="nav align-items-center gap-2 fs-xs">
                  <a class="nav-link text-body-secondary fs-xs fw-normal p-0" href="#!">Elif Kaya</a>
                  <hr class="vr my-1 mx-1">
                  <span class="text-body-secondary">23 Ağustos 2024</span>
                </div>
              </div>
            </article>

            <!-- Makale -->
            <article class="col">
              <a class="ratio d-flex hover-effect-scale rounded-4 overflow-hidden" href="#!" style="--cz-aspect-ratio: calc(260 / 306 * 100%)">
                <img src="{% static "assets/img/blog/grid/v2/13.jpg" %}" class="hover-effect-target" alt="Image">
              </a>
              <div class="pt-4">
                <div class="nav pb-2 mb-1">
                  <a class="nav-link text-body fs-xs text-uppercase p-0" href="#!">Perde Temizliği</a>
                </div>
                <h3 class="h6 mb-3">
                  <a class="hover-effect-underline" href="#!">Perdelerinizi İlk Günkü Gibi Korumanın 5 Yolu</a>
                </h3>
                <div class="nav align-items-center gap-2 fs-xs">
                  <a class="nav-link text-body-secondary fs-xs fw-normal p-0" href="#!">Merve Demir</a>
                  <hr class="vr my-1 mx-1">
                  <span class="text-body-secondary">9 Ağustos 2024</span>
                </div>
              </div>
            </article>
          </div>
        </section>


        <!-- Müşteri Yorumları -->
        <section class="pb-5 mb-2 mb-sm-3 mb-lg-4 mb-xl-5">

          <!-- Başlık + Yorum Ekle Butonu -->
          <div class="d-sm-flex align-items-center justify-content-between border-bottom pb-2 pb-sm-3">
            <div class="mb-3 me-sm-3">
              <h2 class="h3 pb-2 mb-1">Müşteri Yorumları</h2>
              <div class="d-flex align-items-center fs-sm">
                <div class="d-flex gap-1 me-2">
                  <i class="ci-star-filled text-body-emphasis"></i>
                  <i class="ci-star-filled text-body-emphasis"></i>
                  <i class="ci-star-filled text-body-emphasis"></i>
                  <i class="ci-star-filled text-body-emphasis"></i>
                  <i class="ci-star text-body-tertiary opacity-75"></i>
                </div>
                6 müşteri yorumu baz alınarak
              </div>
            </div>
            <button type="button" class="btn btn-lg btn-outline-dark rounded-pill mb-3" data-bs-toggle="modal" data-bs-target="#reviewForm">Yorum Yaz</button>
          </div>

          <!-- Yorum -->
          <div class="border-bottom py-4">
            <div class="row py-sm-2">
              <div class="col-md-4 col-lg-3 mb-3 mb-md-0">
                <div class="d-flex h6 mb-2">
                  Mehmet Yıldırım
                  <i class="ci-check-circle text-success mt-1 ms-2" data-bs-toggle="tooltip" data-bs-custom-class="tooltip-sm" title="Doğrulanmış Müşteri"></i>
                </div>
                <div class="fs-sm mb-2 mb-md-3">25 Haziran 2024</div>
                <div class="d-flex gap-1 fs-sm">
                  <i class="ci-star-filled text-body-emphasis"></i>
                  <i class="ci-star-filled text-body-emphasis"></i>
                  <i class="ci-star-filled text-body-emphasis"></i>
                  <i class="ci-star-filled text-body-emphasis"></i>
                  <i class="ci-star-filled text-body-emphasis"></i>
                </div>
              </div>
              <div class="col-md-8 col-lg-9">
                <p class="mb-md-4">Bu perdeyi gerçekten çok beğendim! Odamın havasını tamamen değiştirdi. Kumaş kalitesi harika ve ışığı çok güzel süzüyor. Tavsiye ederim!</p>
                <div class="d-sm-flex justify-content-between">
                  <div class="d-flex align-items-center fs-sm fw-medium text-dark-emphasis pb-2 pb-sm-0 mb-1 mb-sm-0">
                    <i class="ci-check fs-base me-1" style="margin-top: .125rem"></i>
                    Evet, bu ürünü tavsiye ederim
                  </div>
                  <div class="d-flex align-items-center gap-2">
                    <div class="fs-sm fw-medium text-dark-emphasis me-1">Faydalı oldu mu?</div>
                    <button type="button" class="btn btn-sm btn-secondary">
                      <i class="ci-thumbs-up fs-sm ms-n1 me-1"></i>
                      0
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Yorum -->
          <div class="border-bottom py-4">
            <div class="row py-sm-2">
              <div class="col-md-4 col-lg-3 mb-3 mb-md-0">
                <div class="d-flex h6 mb-2">
                  Ayşe Demir
                  <i class="ci-check-circle text-success mt-1 ms-2" data-bs-toggle="tooltip" data-bs-custom-class="tooltip-sm" title="Doğrulanmış Müşteri"></i>
                </div>
                <div class="fs-sm mb-2 mb-md-3">8 Nisan 2024</div>
                <div class="d-flex gap-1 fs-sm">
                  <i class="ci-star-filled text-body-emphasis"></i>
                  <i class="ci-star-filled text-body-emphasis"></i>
                  <i class="ci-star text-body-tertiary opacity-75"></i>
                  <i class="ci-star text-body-tertiary opacity-75"></i>
                  <i class="ci-star text-body-tertiary opacity-75"></i>
                </div>
              </div>
              <div class="col-md-8 col-lg-9">
                <p class="mb-md-4">Perdenin rengi çok güzel ama kumaşı biraz daha kaliteli olabilirdi. Işık geçirgenliği beklentimin altında kaldı. Genel olarak fena değil ama biraz daha iyi olmasını beklerdim.</p>
                <div class="d-sm-flex justify-content-between">
                  <div class="d-flex align-items-center fs-sm fw-medium text-dark-emphasis pb-2 pb-sm-0 mb-1 mb-sm-0">
                    <i class="ci-close fs-base me-1" style="margin-top: .125rem"></i>
                    Hayır, bu ürünü tavsiye etmiyorum
                  </div>
                  <div class="d-flex align-items-center gap-2">
                    <div class="fs-sm fw-medium text-dark-emphasis me-1">Faydalı oldu mu?</div>
                    <button type="button" class="btn btn-sm btn-secondary">
                      <i class="ci-thumbs-up fs-sm ms-n1 me-1"></i>
                      3
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Daha Fazla Yorum Göster Butonu -->
          <div class="nav pt-3 mt-md-2 mb-xxl-2">
            <a class="nav-link animate-underline collapsed px-0" href="#moreReviews" data-bs-toggle="collapse" aria-expanded="false" aria-controls="moreReviews" aria-label="Show / hide reviews">
              <span class="animate-target" data-label-collapsed="Daha fazla yorum göster" data-label-expanded="Daha az yorum göster"></span>
              <i class="collapse-toggle-icon ci-chevron-down fs-base mt-1 ms-1"></i>
            </a>
          </div>
        </section>
      </div>
    </main>




<script>

  $(document).on('click', '#add-button', function(e) {
      e.preventDefault();

      let product_id = $(this).data('id'); // Use data attribute instead of val()
      let product_quantity = $('#select option:selected').val(); // Use val() for numbers
      let product_width = $('#product_width').val();
      let product_length = $('#product_length').val();
      let calculated_price = $('#calculated_price').val();


      $.ajax({
          type: 'POST',
          url: '{% url "cart-add" %}',

          data: {
              product_id: product_id,
              product_quantity: product_quantity,
              product_width: product_width,
              product_length: product_length,
              calculated_price: calculated_price,
              csrfmiddlewaretoken: '{{ csrf_token }}',
              action: 'post'
          },

          success: function(json) {

              console.log("AJAX Success:", json); // Log success response
              document.getElementById("cart-qty").textContent =json.qty

          },

          error: function(xhr, errmsg, err) {
              console.log("AJAX Error:", xhr.status, xhr.responseText); // Log error details
          }
      });
  });


</script>

{% endblock %}
